<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="UAF-2440-1" author="mwellman">
        <preConditions onError="MARK_RAN" onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT COUNT(*) FROM KRCR_NMSPC_T
				WHERE NMSPC_CD = 'KFS-TAX'
            </sqlCheck>
        </preConditions>
<!-- 		<preConditions onError="MARK_RAN" onFail="MARK_RAN">
			<sqlCheck expectedResult="1">
				SELECT * FROM KRCR_NMSPC_T
				WHERE NMSPC_CD = 'KUALI-TAX'
			</sqlCheck>
		</preConditions>
 -->        <comment>
            UAF-2440 - CONVERT KUALI-TAX TO KFS-TAX
        </comment>
<!--         <insert tableName="KRCR_NMSPC_T">
			<column name="NMSPC_CD" value="KFS-TAX"/>
			<column name="OBJ_ID" value="KFS-TAX"/>
			<column name="VER_NBR" value="1"/>
			<column name="NM" value="TAX"/>
			<column name="ACTV_IND" value="Y"/>
			<column name="APPL_ID" value="KFS"/>
		</insert> -->
		<update tableName="KRCR_NMSPC_T">
			<column name="NMSPC_CD" value="KFS-TAX"/>
			<where>NMSPC_CD = 'KUALI-TAX'</where>
		</update>
		<rollback>
			<update tableName="KRCR_NMSPC_T">
				<column name="NMSPC_CD" value="KFS-TAX"/>
				<where>NMSPC_CD = 'KFS-TAX'</where>
			</update>
		</rollback>
    </changeSet>
	
	<changeSet id="UAF-2440-2" author="mwellman">
		<preConditions onError="MARK_RAN" onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT * FROM KRCR_PARM_T
				WHERE NMSPC_CD = 'KFS-TAX'
			</sqlCheck>
		</preConditions>
		<comment>
			UAF-2440 - ADD PARAMETERS TO KFS-TAX NAMESPACE
		</comment>
		<update tableName="KRCR_PARM_T">
			<column name="NMSPC_CD" value="KFS-TAX"/>
            <where>NMSPC_CD = 'KUALI-TAX'
					AND ( PARM_NM='1099_EXTRACT_CONS_CODES'
						OR PARM_NM='1099_EXTRACT_OBJECT_LEVELS'
						OR PARM_NM='1099_EXTRACT_OVERRIDE_PMT_TYPE_CODE'
						OR PARM_NM='1099_EXTRACT_TYPE'
						OR PARM_NM='1099_OBJECT_CODES'
						OR PARM_NM='1099_OBJECT_CODES_OVERRIDING_RESTRICTION'
						OR PARM_NM='1099_PAYEE_ADDR_TYPE_CODES'
						OR PARM_NM='1099_PAYER_TRANSCD'
						OR PARM_NM='1099_PAYMENT_PERIOD_END'
						OR PARM_NM='1099_PAYMENT_PERIOD_START'
						OR PARM_NM='1099_REP_DATA_LOAD_IND'
						OR PARM_NM='1099_REPORTING_PERIOD'
						OR PARM_NM='1099_TAX_AMOUNT_BY_PAYMENT_TYPE'
						OR PARM_NM='1099_TOTAL_TAX_AMOUNT'
						OR PARM_NM='VENDOR_OWNER_CODES'
						OR PARM_NM='ACCOUNT_NUM'
						OR PARM_NM='ATTORNEY'
						OR PARM_NM='CORRECTION_IND'
						OR PARM_NM='CROP'
						OR PARM_NM='DEFERRALS'
						OR PARM_NM='FEDERAL'
						OR PARM_NM='FISHING'
						OR PARM_NM='GOLDEN'
						OR PARM_NM='INCOME'
						OR PARM_NM='MEDICAL'
						OR PARM_NM='NONEMPLOYEE'
						OR PARM_NM='OTHER'
						OR PARM_NM='PAYEE_ADDRESS'
						OR PARM_NM='PAYEE_NAME'
						OR PARM_NM='PAYEE_STATE_CITY_ZIP'
						OR PARM_NM='PAYEE_TAX_ID'
						OR PARM_NM='PAYER
						OR PARM_NM='PAYER_TAX_ID'
						OR PARM_NM='RENTS'
						OR PARM_NM='ROYALTIES'
						OR PARM_NM='STATE_INCOME'
						OR PARM_NM='STATE_NO'
						OR PARM_NM='SUBSTITUTE'
						OR PARM_NM='WITHHELD'
						)
			</where>
		</update>
		<rollback>
			<update tableName="KRCR_PARM_T">
				<column name="NMSPC_CD" value="KUALI-TAX"/>
				<where>NMSPC_CD = 'KFS-TAX'
						AND ( PARM_NM='1099_EXTRACT_CONS_CODES'
							OR PARM_NM='1099_EXTRACT_OBJECT_LEVELS'
							OR PARM_NM='1099_EXTRACT_OVERRIDE_PMT_TYPE_CODE'
							OR PARM_NM='1099_EXTRACT_TYPE'
							OR PARM_NM='1099_OBJECT_CODES'
							OR PARM_NM='1099_OBJECT_CODES_OVERRIDING_RESTRICTION'
							OR PARM_NM='1099_PAYEE_ADDR_TYPE_CODES'
							OR PARM_NM='1099_PAYER_TRANSCD'
							OR PARM_NM='1099_PAYMENT_PERIOD_END'
							OR PARM_NM='1099_PAYMENT_PERIOD_START'
							OR PARM_NM='1099_REP_DATA_LOAD_IND'
							OR PARM_NM='1099_REPORTING_PERIOD'
							OR PARM_NM='1099_TAX_AMOUNT_BY_PAYMENT_TYPE'
							OR PARM_NM='1099_TOTAL_TAX_AMOUNT'
							OR PARM_NM='VENDOR_OWNER_CODES'
							OR PARM_NM='ACCOUNT_NUM'
							OR PARM_NM='ATTORNEY'
							OR PARM_NM='CORRECTION_IND'
							OR PARM_NM='CROP'
							OR PARM_NM='DEFERRALS'
							OR PARM_NM='FEDERAL'
							OR PARM_NM='FISHING'
							OR PARM_NM='GOLDEN'
							OR PARM_NM='INCOME'
							OR PARM_NM='MEDICAL'
							OR PARM_NM='NONEMPLOYEE'
							OR PARM_NM='OTHER'
							OR PARM_NM='PAYEE_ADDRESS'
							OR PARM_NM='PAYEE_NAME'
							OR PARM_NM='PAYEE_STATE_CITY_ZIP'
							OR PARM_NM='PAYEE_TAX_ID'
							OR PARM_NM='PAYER
							OR PARM_NM='PAYER_TAX_ID'
							OR PARM_NM='RENTS'
							OR PARM_NM='ROYALTIES'
							OR PARM_NM='STATE_INCOME'
							OR PARM_NM='STATE_NO'
							OR PARM_NM='SUBSTITUTE'
							OR PARM_NM='WITHHELD'
							)
				</where>
			</update>
		</rollback>
    </changeSet>
	
<!-- 	<changeSet id="UAF-2440-3" author="mwellman">
		<preConditions onError="MARK_RAN" onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT * FROM KRIM_PERM_T
				WHERE NMSPC_CD = 'KFS-TAX'
			</sqlCheck>
		</preConditions>
		<comment>
			UAF-2440 - ADD PERMISSIONS TO KFS-TAX NAMESPACE
		</comment>
		<update tableName="KRIM_PERM_T">
			<column name="NMSPC_CD" value="KFS-TAX"/>
            <where>NMSPC_CD = 'KUALI-TAX'
					AND ( NM='1099_EXTRACT_CONS_CODES'
						OR NM='Open Document'
						OR NM='Blanket Approve Document'
						OR NM='Initiate Document'
						OR NM='Use Screen'
						OR NM='Inquire Into Records'
						OR NM='Look Up Records'
						OR NM='Full Unmask Field'
						OR NM='Modify Batch Jobs'
						OR NM='View Batch File(s)'
						OR NM='Maintain System Parameter'
						OR NM='Create/Maintain'
						OR NM='Administer Routing for Document'
						)
			</where>
		</update>
		<rollback>
			<update tableName="KRIM_PERM_T">
				<column name="NMSPC_CD" value="KUALI-TAX"/>
				<where>NMSPC_CD = 'KFS-TAX'
						AND ( NM='1099_EXTRACT_CONS_CODES'
							OR NM='Open Document'
							OR NM='Blanket Approve Document'
							OR NM='Initiate Document'
							OR NM='Use Screen'
							OR NM='Inquire Into Records'
							OR NM='Look Up Records'
							OR NM='Full Unmask Field'
							OR NM='Modify Batch Jobs'
							OR NM='View Batch File(s)'
							OR NM='Maintain System Parameter'
							OR NM='Create/Maintain'
							OR NM='Administer Routing for Document'
							)
				</where>
			</update>
		</rollback>
    </changeSet> -->
</databaseChangeLog>
