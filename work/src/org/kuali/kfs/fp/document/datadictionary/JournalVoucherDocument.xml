<?xml version="1.0" encoding="UTF-8"?><beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p" xmlns:dd="http://rice.kuali.org/dd" xsi:schemaLocation="http://www.springframework.org/schema/beans         http://www.springframework.org/schema/beans/spring-beans-2.0.xsd         http://rice.kuali.org/dd         http://rice.kuali.org/dd/dd.xsd">

  <bean id="JournalVoucherDocument" parent="JournalVoucherDocument-parentBean"/>

  <bean id="JournalVoucherDocument-parentBean" abstract="true" parent="AccountingDocumentEntry">
    <property name="allowsErrorCorrection" value="true"/>
    <property name="documentTypeName" value="JV"/>
    <property name="documentClass" value="org.kuali.kfs.fp.document.JournalVoucherDocument"/>
    <property name="businessRulesClass" value="org.kuali.kfs.sys.document.validation.impl.AccountingRuleEngineRuleBase"/>
    <property name="documentAuthorizerClass" value="org.kuali.kfs.sys.document.authorization.AccountingDocumentAuthorizerBase"/>
    <property name="sessionDocument" value="true"/>
    <property name="allowsCopy" value="true"/>

    <property name="attributes">
      <list>
        <ref bean="JournalVoucherDocument-accountingPeriod"/>
        <ref bean="JournalVoucherDocument-reversalDate"/>
        <ref bean="JournalVoucherDocument-balanceTypeCode"/>
      </list>
    </property>
    <property name="validationMap" ref="JournalVoucherDocument-validations"/>
    
    <property name="accountingLineGroups">
    	<map>
    		<entry>
    			<key><value>source</value></key>
	    		<ref bean="JournalVoucherDocument-sourceAccountingLineGroup" parent="AccountingLineGroup"/>
	    	</entry>
	    	<entry>
    			<key><value>source-withExtEncumbrance</value></key>
	    		<ref bean="JournalVoucherDocument-sourceAccountingLineGroup-withExtEncumbrance" parent="AccountingLineGroup"/>
	    	</entry>
    		<entry>
    			<key><value>source-withDebitCredit</value></key>
	    		<ref bean="JournalVoucherDocument-sourceAccountingLineGroup-withDebitCredit" parent="AccountingLineGroup"/>
	    	</entry>
	    	<entry>
    			<key><value>source-withDebitCreditExtEncumbrance</value></key>
	    		<ref bean="JournalVoucherDocument-sourceAccountingLineGroup-withDebitCreditExtEncumbrance" parent="AccountingLineGroup"/>
	    	</entry>	    	
    	</map>
    </property>
    <property name="importedLineParserClass" value="org.kuali.kfs.sys.businessobject.AccountingLineParserBase"/>
    <property name="workflowAttributes">
    	<ref bean="JournalVoucherDocument-workflowAttributes"/>
    </property> 
  </bean>

<!-- Attribute Definitions -->


  <bean id="JournalVoucherDocument-accountingPeriod" parent="JournalVoucherDocument-accountingPeriod-parentBean"/>

  <bean id="JournalVoucherDocument-accountingPeriod-parentBean" abstract="true" parent="AttributeDefinition">
    <property name="name" value="accountingPeriod"/>
    <property name="forceUppercase" value="false"/>
    <property name="label" value="Accounting Period"/>
    <property name="shortLabel" value="Acct. Prd."/>
    <property name="maxLength" value="50"/>
    <property name="validationPattern">
      <bean parent="AnyCharacterValidationPattern"/>
    </property>
    <property name="required" value="true"/>
    <property name="control">
      <bean parent="TextControlDefinition" p:size="50"/>
    </property>
    <property name="summary" value="&amp;nbsp;"/>
    <property name="description" value="The calendar accounting periods during which the Journal Voucher applies. Select one from the pulldown list."/>
  </bean>
  <bean id="JournalVoucherDocument-reversalDate" parent="JournalVoucherDocument-reversalDate-parentBean"/>

  <bean id="JournalVoucherDocument-reversalDate-parentBean" abstract="true" parent="GenericAttributes-genericDate">
    <property name="name" value="reversalDate"/>
    <property name="label" value="Reversal Date"/>
    <property name="shortLabel" value="Reversal Date"/>
    <property name="required" value="false"/>
    <property name="description" value="The date when the Kuali Financial System (KFS) will automatically reverse the General Ledger entries entered on the document's date. Use the calendar icon to select and format the Reversal Date."/>
  </bean>
  <bean id="JournalVoucherDocument-balanceTypeCode" parent="JournalVoucherDocument-balanceTypeCode-parentBean"/>

  <bean id="JournalVoucherDocument-balanceTypeCode-parentBean" abstract="true" parent="BalanceType-code">
    <property name="name" value="balanceTypeCode"/>
    <property name="summary" value="&amp;nbsp;"/>
    <property name="description" value="The 2-character code and text describing the type of balance involved in the Journal Voucher. Select one from the pulldown list."/>
  </bean>

  <!-- validations -->
  
  <bean id="JournalVoucherDocument-validations" parent="JournalVoucherDocument-validations-parentBean"/>
  
  <bean id="JournalVoucherDocument-validations-parentBean" class="org.springframework.beans.factory.config.MapFactoryBean">
  	<property name="sourceMap">
		<map>
			<entry>
				<key><value>org.kuali.kfs.sys.document.validation.event.AttributedRouteDocumentEvent</value></key>
				<value>JournalVoucher-routeDocumentValidation</value>
			</entry>
			<entry>
				<key><value>org.kuali.kfs.sys.document.validation.event.AttributedSaveDocumentEvent</value></key>
				<value>JournalVoucher-saveDocumentValidation</value>
			</entry>
			<entry>
				<key><value>org.kuali.kfs.sys.document.validation.event.AttributedApproveDocumentEvent</value></key>
				<value>JournalVoucher-approveDocumentValidation</value>
			</entry>
			<entry>
				<key><value>org.kuali.kfs.sys.document.validation.event.AttributedBlanketApproveDocumentEvent</value></key>
				<value>JournalVoucher-blanketApproveDocumentValidation</value>
			</entry>
			<entry>
				<key><value>org.kuali.kfs.sys.document.validation.event.AddAccountingLineEvent</value></key>
				<value>JournalVoucher-addAccountingLineValidation</value>
			</entry>
			<entry>
				<key><value>org.kuali.kfs.sys.document.validation.event.DeleteAccountingLineEvent</value></key>
				<value>JournalVoucher-deleteAccountingLineValidation</value>
			</entry>
			<entry>
				<key><value>org.kuali.kfs.sys.document.validation.event.UpdateAccountingLineEvent</value></key>
				<value>JournalVoucher-updateAccountingLineValidation</value>
			</entry>
			<entry>
				<key><value>org.kuali.kfs.sys.document.validation.event.ReviewAccountingLineEvent</value></key>
				<value>JournalVoucher-reviewAccountingLineValidation</value>
			</entry>
    	</map>
    </property>
  </bean>

  <!-- accounting line groups -->
  <bean id="JournalVoucherDocument-sourceAccountingLineGroup" parent="JournalVoucherDocument-sourceAccountingLineGroup-parentBean"/>  
  <bean id="JournalVoucherDocument-sourceAccountingLineGroup-parentBean" parent="AccountingLineGroup" abstract="true">
	  <property name="accountingLineView" ref="Voucher-accountingLineView"/>
	  <property name="accountingLineClass" value="org.kuali.kfs.fp.businessobject.VoucherSourceAccountingLine"/>
	  <property name="groupLabel" value="Source"/>
	  <property name="accountingLineAuthorizerClass" value="org.kuali.kfs.fp.document.authorization.FinancialProcessingAccountingLineAuthorizer"/>
	  <property name="importedLinePropertyPrefix" value="source"/>
	  <property name="totals" ref="AccountingDocument-sourceGroupTotals"/>
	  <property name="errorKey" value="document.sourceAccounting*,sourceAccountingLines,newSourceLine*,voucherLineHelpers*"/> 
  </bean>  
  
  <bean id="JournalVoucherDocument-sourceAccountingLineGroup-withExtEncumbrance" parent="JournalVoucherDocument-sourceAccountingLineGroup-withExtEncumbrance-parentBean"/>  
  <bean id="JournalVoucherDocument-sourceAccountingLineGroup-withExtEncumbrance-parentBean" parent="AccountingLineGroup" abstract="true">
	  <property name="accountingLineView" ref="Voucher-accountingLineView-withExtEncumbrance"/>
	  <property name="accountingLineClass" value="org.kuali.kfs.fp.businessobject.VoucherSourceAccountingLine"/>
	  <property name="groupLabel" value="Source"/>
	  <property name="accountingLineAuthorizerClass" value="org.kuali.kfs.fp.document.authorization.FinancialProcessingAccountingLineAuthorizer"/>
	  <property name="importedLinePropertyPrefix" value="source"/>
	  <property name="totals" ref="AccountingDocument-sourceGroupTotals"/>
	  <property name="errorKey" value="document.sourceAccounting*,sourceAccountingLines,newSourceLine*,voucherLineHelpers*"/> 
  </bean> 
  
  <bean id="JournalVoucherDocument-sourceAccountingLineGroup-withDebitCredit" parent="JournalVoucherDocument-sourceAccountingLineGroup-withDebitCredit-parentBean"/>  
  <bean id="JournalVoucherDocument-sourceAccountingLineGroup-withDebitCredit-parentBean" parent="AccountingLineGroup" abstract="true">
	  <property name="accountingLineView" ref="Voucher-accountingLineView-withDebitCredit"/>
	  <property name="accountingLineClass" value="org.kuali.kfs.fp.businessobject.VoucherSourceAccountingLine"/>
	  <property name="groupLabel" value="Source"/>
	  <property name="accountingLineAuthorizerClass" value="org.kuali.kfs.fp.document.authorization.FinancialProcessingAccountingLineAuthorizer"/>
	  <property name="importedLinePropertyPrefix" value="source"/>
	  <property name="totals" ref="AccountingDocument-sourceDebitCerditTotals"/>
	  <property name="errorKey" value="document.sourceAccounting*,sourceAccountingLines,newSourceLine*,voucherLineHelpers*"/> 
  </bean>  
  
  <bean id="JournalVoucherDocument-sourceAccountingLineGroup-withDebitCreditExtEncumbrance" parent="JournalVoucherDocument-sourceAccountingLineGroup-withDebitCreditExtEncumbrance-parentBean"/>  
  <bean id="JournalVoucherDocument-sourceAccountingLineGroup-withDebitCreditExtEncumbrance-parentBean" parent="AccountingLineGroup" abstract="true">
	  <property name="accountingLineView" ref="Voucher-accountingLineView-withDebitCreditExtEncumbrance"/>
	  <property name="accountingLineClass" value="org.kuali.kfs.fp.businessobject.VoucherSourceAccountingLine"/>
	  <property name="groupLabel" value="Source"/>
	  <property name="accountingLineAuthorizerClass" value="org.kuali.kfs.fp.document.authorization.FinancialProcessingAccountingLineAuthorizer"/>
	  <property name="importedLinePropertyPrefix" value="source"/>
	  <property name="totals" ref="AccountingDocument-sourceDebitCerditTotals"/>
	  <property name="errorKey" value="document.sourceAccounting*,sourceAccountingLines,newSourceLine*,voucherLineHelpers*"/> 
  </bean>
  
  <!-- workflow attributes -->
  <bean id="JournalVoucherDocument-workflowAttributes" parent="JournalVoucherDocument-workflowAttributes-parentBean"/>
	
	<bean id="JournalVoucherDocument-workflowAttributes-parentBean" abstract="true" parent="WorkflowAttributes">
		
	</bean>
</beans>